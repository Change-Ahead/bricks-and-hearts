@model AdminListModel

@{
    ViewData["Title"] = "Admin List";
}

<div class="tables">
    <h2>Pending Admins</h2>
    <table class="display table" id="pendingAdminTable">
        @if (Model.PendingAdmins.Count > 0)
        {
            <thead>
            <tr>
                <th scope="col">Google Email</th>
                <th scope="col">Google Name</th>
                <th></th>
                <th></th>
            </tr>
            </thead> 
        }
        else
        {
            <div>There are no pending admin access requests.</div>
        }
        <tbody>
        @foreach (var pendingAdmin in Model.PendingAdmins)
        {
            <tr>
                <td>@pendingAdmin.GoogleEmail</td>
                <td>@pendingAdmin.GoogleUserName</td>
                <td>
                    @using (Html.BeginForm("AcceptAdminRequest", "Admin", new { userToAcceptId = pendingAdmin.Id }, FormMethod.Post))
                    {
                        <button type="submit" class="btn btn-outline-success">Accept</button>
                    }
                </td>
                <td>
                    @using (Html.BeginForm("RejectAdminRequest", "Admin", new { userToRejectId = pendingAdmin.Id }, FormMethod.Post))
                    {
                        <button type="submit" class="btn btn-outline-danger">Reject</button>
                    }
                </td>
            </tr>
        }
        </tbody>
    </table>
    <br/>
    <h2>Current Admins</h2>
    <table class="display table" id="adminTable">
        @if (Model.CurrentAdmins.Count > 0)
        {
            <thead>
            <tr>
                <th scope="col">Google Email</th>
                <th scope="col">Google Name</th>
                <th></th>
            </tr>
            </thead>
        }
        else
        {
            <div>There are no current admins.</div> //this should never be the case (if so, who is seeing this message?)
        }
        <tbody>
        @foreach (var currentAdmin in Model.CurrentAdmins)
        {
            <tr>
                <td>@currentAdmin.GoogleEmail</td>
                <td>@currentAdmin.GoogleUserName</td>
                <td>
                    @using (Html.BeginForm("RemoveAdmin", "Admin", new { userToRemoveId = currentAdmin.Id }, FormMethod.Post))
                    {
                        <button type="submit" class="btn btn-outline-danger">Revoke admin rights</button>
                    }
                </td>
            </tr>
        }
        </tbody>
    </table>
</div>