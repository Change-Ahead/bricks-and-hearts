@model LandlordProfileModel

@{
    ViewData["Title"] = "Details";
}

<h1>Profile</h1>

<div>
    @{
        if (TempData["FlashMessage"] != null)
        {
            <div class="alert alert-warning" role="alert">
                @TempData["FlashMessage"]
            </div>
        }
    }
    @{
        if (TempData["ToastMessage"] != null)
        {
            <div class="alert alert-warning" role="alert">
                @TempData["ToastMessage"]
                @if (TempData["InviteLink"] != null)
                {
                    <br/>
                    @TempData["InviteLink"]
                    <br>
                    <br>
                    @using (Html.BeginForm("RenewInviteLink", "Admin", new { landlordId = Model.LandlordId }, FormMethod.Post))
                    {
                        <button type="submit" class="btn btn-sm btn-outline-primary">Get New Link</button>
                    }
                }
            </div>
        }
    }
    <h4>Landlord</h4>
    
    <hr/>
    
    <h4>Personal details</h4>
    
    <div class="tables">
        <table class="table table-bordered">
            <tbody>
            <tr>
                <td>@Html.DisplayNameFor(model => model.FirstName)</td>
                <td>@Html.DisplayFor(model => model.FirstName)</td>
            </tr>
            <tr>
                <td>@Html.DisplayNameFor(model => model.LastName)</td>
                <td>@Html.DisplayFor(model => model.LastName)</td>
            </tr>
        </table>
    </div>

    <h4>Landlord details</h4>
    
    <div class="tables">
        <table class="table table-bordered">
            <tbody>
            <tr>
                <td>@Html.DisplayNameFor(model => model.CompanyName)</td>
                <td>@Html.DisplayFor(model => model.CompanyName)</td>
            </tr>
        </table>
    </div>

    <h4>Contact details</h4>
    <div class="tables">
        <table class="table table-bordered">
            <tbody>
            <tr>
                <td>@Html.DisplayNameFor(model => model.Email)</td>
                <td>@Html.DisplayFor(model => model.Email)</td>
            </tr>
            <tr>
                <td>@Html.DisplayNameFor(model => model.Phone)</td>
                <td>@Html.DisplayFor(model => model.Phone)</td>
            </tr>
        </table>
    </div>
    
    <h4>ChangeAhead Charter</h4>
    @if (Model.CharterApproved)
    {
        <p>Charter status: Approved</p>
    }
    else
    {
        <p>Charter status: Pending</p>
        @if (Model.CurrentUserIsAdmin)
        {
            @using (Html.BeginForm("ApproveCharter", "Landlord", FormMethod.Post))
            {
                <input type="hidden" id="landlordId" name="landlordId" value=@Model.LandlordId>
                <button type="submit" class="btn-primary">Approve Landlord</button>
            }
        }
    }
    
    @using (Html.BeginForm("GetInviteLink", "Admin", new { landlordId = Model.LandlordId }, FormMethod.Post))
    {
        <button type="submit" class="btn btn-primary">Get Invite Link</button>
    }
</div>