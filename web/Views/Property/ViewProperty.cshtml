@model PropertyDetailsViewModel

@{
    ViewData["Title"] = "View Property";
}

<div class="mt-5 row">
    <div class="col-auto mb-2">
        <h1 class="font-h1 d-inline">@Model.Property!.Address.ToShortAddressString()</h1>
    </div>
    <div class="col-auto mb-2 d-flex align-items-center">
        <partial name="Details/_AvailabilityPill" model="Model.Property"/>
    </div>
</div>

<partial name="Details/_ImageGallery"/>

<div class="row mt-4 px-2">
    <partial name="Details/_Description"/>
</div>

<div class="row mt-4">
    <div class="col-md pb-2">
        <partial name="Details/_Details"/>
        <partial name="Details/_Availability"/>
    </div>

    <div class="col-md d-flex flex-column pb-2">
        <partial name="Details/_TenantPreferences"/>
    </div>
</div>

@if (User.IsInRole("Admin"))
{
    <div class="row mt-4">
        <div class="col-auto mb-2">
            <a asp-action="TenantMatchList" asp-controller="Admin" asp-route-currentPropertyId="@Model.Property.PropertyId" class="btn btn-large btn-outline-primary d-table-cell">View matches</a>
        </div>
        <div class="col-auto mb-2">
            <a asp-action="GetPublicViewLink" asp-controller="Property" asp-route-propertyId="@Model.Property.PropertyId" class="btn btn-large btn-outline-primary d-table-cell">Get shareable link</a>
        </div>
    </div>
}

<div class="row mt-4">
    <div class="col-auto mb-2">
        <a asp-action="EditProperty" asp-controller="Property" asp-route-propertyId="@Model.Property.PropertyId" class="btn btn-large btn-outline-primary d-table-cell">Edit property</a>
    </div>
    <div class="col-auto">
        <button type="button" class="btn btn-large btn-outline-danger" data-bs-toggle="modal" data-bs-target="#deletePropertyModal">
            <i class="bi bi-trash"></i>
            Delete property
        </button>
    </div>
</div>

<!-- Delete property modal -->
<div class="modal fade" id="deletePropertyModal" tabindex="-1" aria-labelledby="deletePropertyModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deletePropertyModalLabel">Delete property</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Are you sure you want to delete this property? This cannot be undone.
            </div>
            <div class="modal-footer">
                <form method="post" asp-controller="Property" asp-action="DeleteProperty">
                    <input type="hidden" name="PropertyId" value="@Model.Property.PropertyId"/>
                    <input type="submit" value="Delete" class="btn btn-danger"/>
                </form>
                <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

<script src="~/js/propertyDetails.js" asp-append-version="true"></script>
